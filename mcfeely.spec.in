# $Id: mcfeely.spec.in,v 1.10 1999/08/02 21:23:53 ahosey Exp $

# mcfeely        Asynchronous remote task execution.
# Copyright (C) 1999 Kiva Networking
#
# This program is free software; you can redistribute it and/or
# modify it under the terms of the GNU General Public License
# as published by the Free Software Foundation; either version 2
# of the License, or (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
#
# You may contact the maintainer at <mcfeely-maintainer@systhug.com>.

Summary: asynchronous task execution on multiple hosts
Name: mcfeely
Version: @version@
Release: 1
Copyright: GPL
Group: Daemons
Source: mcfeely-@version@.tar.gz
BuildRoot: /tmp/mcfeely-build
Packager: Matt Liggett <mml@pobox.com>
Vendor: Kiva Networking
%description
@BLURB@

%package common
Summary: files common to mcfeely-client and mcfeely-server
Group: Daemons

%description common
Files common to mcfeely-client and mcfeely-server.

%package server
Summary: asynchronous task execution on multiple hosts -- server
Group: Daemons
Requires: mcfeely-common

%description server
@BLURB@

This is the server package.

%package client
Summary: asynchronous task execution on multiple hosts -- client
Group: Daemons
Requires: mcfeely-common

%description client
@BLURB@

This is the client package.

%prep
%setup

%build
make

%install
make ROOT="$RPM_BUILD_ROOT" rpminstall

%files common
%attr(- @ROOTUSER@ @MCGROUP@) %dir @TOPDIR@
%attr(- @ROOTUSER@ @MCGROUP@) %dir @TOPDIR@/bin
%attr(- @ROOTUSER@ @MCGROUP@) %dir @TOPDIR@/control
%attr(- @ROOTUSER@ @MCGROUP@)      @TOPDIR@/lib

%files server
%attr(- @MCUSER@   @QGROUP@ )      @TOPDIR@/bin/mcfeely-queue
%attr(- @ROOTUSER@ @MCGROUP@)      @TOPDIR@/bin/mcfeely-start
%attr(- @ROOTUSER@ @MCGROUP@)      @TOPDIR@/bin/mcfeely-qread
%attr(- @ROOTUSER@ @MCGROUP@)      @TOPDIR@/bin/mcfeely-manage
%attr(- @ROOTUSER@ @MCGROUP@)      @TOPDIR@/bin/mcfeely-spawn
%attr(- @ROOTUSER@ @MCGROUP@)      @TOPDIR@/bin/mcfeely-ttpc
%attr(- @MCUSER@   @MCGROUP@) %dir @TOPDIR@/control/secrets
%attr(- @MCUSER@   @MCGROUP@) %dir @TOPDIR@/queue
%attr(- @MCUSER@   @MCGROUP@) %dir @TOPDIR@/queue/pid
%attr(- @MCUSER@   @MCGROUP@) %dir @TOPDIR@/queue/task
%attr(- @MCUSER@   @MCGROUP@) %dir @TOPDIR@/queue/info
%attr(- @MCUSER@   @MCGROUP@) %dir @TOPDIR@/queue/desc
%attr(- @MCUSER@   @MCGROUP@) %dir @TOPDIR@/queue/newj
%attr(- @MCUSER@   @MCGROUP@) %dir @TOPDIR@/queue/job
%attr(- @MCUSER@   @MCGROUP@) %dir @TOPDIR@/queue/fnot
%attr(- @MCUSER@   @MCGROUP@) %dir @TOPDIR@/queue/snot
%attr(- @MCUSER@   @MCGROUP@) %dir @TOPDIR@/queue/rep
%attr(- @MCUSER@   @MCGROUP@)      @TOPDIR@/queue/trigger
%attr(- @ROOTUSER@ @QGROUP@)       @PERLDIR@/McFeely.pm
%attr(- @ROOTUSER@ @QGROUP@)  %dir @PERLDIR@/McFeely
%attr(- @ROOTUSER@ @QGROUP@)       @PERLDIR@/McFeely/Internal.pm
%attr(- @ROOTUSER@ @QGROUP@)       @PERLDIR@/McFeely/Job.pm
%attr(- @ROOTUSER@ @QGROUP@)       @PERLDIR@/McFeely/Metatask.pm
%attr(- @ROOTUSER@ @QGROUP@)       @PERLDIR@/McFeely/Task.pm

%files client
%attr(- @ROOTUSER@ @MCGROUP@) %dir @TOPDIR@/comm
%attr(- @ROOTUSER@ @MCGROUP@)      @TOPDIR@/bin/mcfeely-ttpd
%attr(- @ROOTUSER@ @MCGROUP@)      @TOPDIR@/bin/snooze
